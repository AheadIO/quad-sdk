<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Spirit Software: kodlab_gazebo</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Spirit Software
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">kodlab_gazebo </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>ROS package for the simulation of robotic platforms using Gazebo</p>
<p>Maintainer: Vasileios Vasilopoulos (<a href="#" onclick="location.href='mai'+'lto:'+'vva'+'si'+'lo@'+'se'+'as.'+'up'+'enn'+'.e'+'du'; return false;">vvasi<span style="display: none;">.nosp@m.</span>lo@s<span style="display: none;">.nosp@m.</span>eas.u<span style="display: none;">.nosp@m.</span>penn<span style="display: none;">.nosp@m.</span>.edu</a>)</p>
<h2>General notes</h2>
<ol type="1">
<li>This ROS package can be used in conjunction with the Ghost Robotics SDK artifacts, which are independently distributed by Ghost Robotics.</li>
<li>At this point, there is no open source Vision60 control example in the SDK, but once released the following procedure should be identical. For now, you can just launch the Vision60 simulation as explained below.</li>
<li>The simulation depends a lot on friction parameters. These parameters can be configured in the URDF xacro files (<a href="minitaur_description/urdf/minitaur_gazebo.urdf.xacro">minitaur_gazebo.urdf.xacro</a>, <a href="vision60_description/urdf/vision60_gazebo.urdf.xacro">vision60_gazebo.urdf.xacro</a> and <a href="spirit_description/urdf/spirit_gazebo.urdf.xacro">spirit_gazebo.urdf.xacro</a>).</li>
</ol>
<h2>Running the simulation</h2>
<ol type="1">
<li>For the package to work properly, make sure you have installed the following packages: <div class="fragment"><div class="line">$ sudo apt-get install ros-melodic-controller-manager ros-melodic-joint-state-controller ros-melodic-gazebo-ros-pkgs ros-melodic-gazebo-ros-control ros-melodic-effort-controllers python-catkin-tools</div></div><!-- fragment --></li>
<li>For some illustrations, we also use the package <a href="http://data.nvision2.eecs.yorku.ca/3DGEMS/">3DGEMS</a>. Download all the subfolders mentioned on the package website and put them in a separate folder.</li>
<li>Copy the package to your ROS workspace folder <div class="fragment"><div class="line">$ cp -r &lt;artifacts_location&gt;/thirdparty/kodlab_gazebo &lt;catkin_ws_location&gt;/src</div></div><!-- fragment --></li>
<li>The following line needs to be added in <code>~/.bashrc</code> to allow for proper Gazebo model detection <div class="fragment"><div class="line">export GAZEBO_MODEL_PATH=${GAZEBO_MODEL_PATH}:&lt;catkin_ws_location&gt;/src/kodlab_gazebo/minitaur_description/sdf:&lt;catkin_ws_location&gt;/src/kodlab_gazebo/minitaur_description:&lt;catkin_ws_location&gt;/src/kodlab_gazebo/vision60_description:&lt;catkin_ws_location&gt;/src/kodlab_gazebo/spirit_description</div></div><!-- fragment --></li>
<li>Also, the following line needs to be added in <code>~/.bashrc</code> to allow for proper use of <a href="http://data.nvision2.eecs.yorku.ca/3DGEMS/">3DGEMS</a> <div class="fragment"><div class="line">export GAZEBO_MODEL_PATH=${GAZEBO_MODEL_PATH}:&lt;3dgems_models_location&gt;/decoration:&lt;3dgems_models_location&gt;/earthquake:&lt;3dgems_models_location&gt;/electronics:&lt;3dgems_models_location&gt;/food:&lt;3dgems_models_location&gt;/furniture:&lt;3dgems_models_location&gt;/kitchen:&lt;3dgems_models_location&gt;/miscellaneous:&lt;3dgems_models_location&gt;/shapes:&lt;3dgems_models_location&gt;/stationery:&lt;3dgems_models_location&gt;/tools</div></div><!-- fragment --></li>
<li>Configure <a href="gazebo_scripts/worlds/ghost.world">ghost.world</a> (or any other <a href="gazebo_scripts/worlds">world</a> file) to include anything you want to show up in your simulation. In this file, you can also configure <code>max_step_size</code> and <code>real_time_update_rate</code> for the simulation. Usually a <code>max_step_size</code> of 0.0005 works for Minitaur. Vision needs a smaller value for contact forces (0.00005 should be enough). Currently, <code>real_time_update_rate</code> is configured to 2000Hz.</li>
<li>Build all the packages <div class="fragment"><div class="line">$ cd &lt;catkin_ws_location&gt;</div><div class="line">$ catkin build</div></div><!-- fragment --></li>
<li>To launch the simulation, build the package and run: <div class="fragment"><div class="line">$ roslaunch gazebo_scripts minitaur_gazebo.launch</div></div><!-- fragment --> for standalone Minitaur, or <div class="fragment"><div class="line">$ roslaunch gazebo_scripts minitaur_sensor_gazebo.launch</div></div><!-- fragment --> for Minitaur equipped with a sensor head, or <div class="fragment"><div class="line">$ roslaunch gazebo_scripts vision60_gazebo.launch</div></div><!-- fragment --> for Vision60, or <div class="fragment"><div class="line">$ roslaunch gazebo_scripts spirit_gazebo.launch</div></div><!-- fragment --> for Spirit.</li>
<li>(Optional) If you want to control the robot using the Ghost SDK, compile and run the corresponding Ghost Robotics SDK script. For this, please use the <a href="extras/Makefile">Makefile example</a> provided here (the format might change in the future). The simulation exposes 3 ROS topics for control: <code>/behaviorId</code>, <code>/behaviorMode</code> and <code>/twist</code>, and several others for checking the robot state: <code>/&lt;robot_name&gt;/state/imu</code>, <code>/&lt;robot_name&gt;/state/batteryState</code>, <code>/&lt;robot_name&gt;/state/behaviorId</code>, <code>/&lt;robot_name&gt;/state/behaviorMode</code>, <code>/&lt;robot_name&gt;/state/joint</code>, <code>/&lt;robot_name&gt;/state/pose</code>. As an example following the Ghost Robotics SDK FirstHop example for Minitaur, the overall process should look like that: <div class="fragment"><div class="line">$ mv &lt;artifacts_location&gt;/examples/FirstHop/Makefile &lt;artifacts_location&gt;/examples/FirstHop/Makefile.bk</div><div class="line">$ cp &lt;artifacts_location&gt;/thirdparty/kodlab_gazebo/extras/Makefile &lt;artifacts_location&gt;/examples/FirstHop/Makefile</div><div class="line">$ cd &lt;artifacts_location&gt;/examples/FirstHop</div><div class="line">$ make</div><div class="line">$ ./FirstHop_MINITAUR_E</div></div><!-- fragment --></li>
</ol>
<h2>Converting Minitaur's URDF to SDF</h2>
<p>The most important requirement to setup the simulation is to properly convert the Minitaur's URDF file to an SDF file. We have a URDF xacro file (<a href="minitaur_description/urdf/minitaur_gazebo.urdf.xacro">minitaur_gazebo.urdf.xacro</a>) in the <a href="minitaur_description/urdf">urdf folder</a> and properly converted URDF and SDF files (see <a href="minitaur_description/sdf/minitaur_constrained/minitaur_constrained.sdf">minitaur_constrained.sdf</a>). If you need to modify any of the above, please run the following commands to convert the xacro file to URDF </p><div class="fragment"><div class="line">$ python xacro.py minitaur_gazebo.urdf.xacro &gt; minitaur_gazebo.urdf</div></div><!-- fragment --><p> and subsequently to SDF using </p><div class="fragment"><div class="line">$ gz sdf -p minitaur_gazebo.urdf &gt; minitaur_gazebo.sdf</div></div><!-- fragment --><p>However, you also need to do the following after the conversion:</p><ol type="1">
<li>Make sure to add the lines below to the end of the SDF file (before the model termination). These lines realize the 5-bar mechanism constraint for each leg (hence the name <code>constrained</code>). <div class="fragment"><div class="line">&lt;joint name=&#39;constraint_back_left&#39; type=&#39;revolute&#39;&gt;</div><div class="line">  &lt;parent&gt;lower_leg_back_leftL_link&lt;/parent&gt;</div><div class="line">  &lt;child&gt;lower_leg_back_leftR_link&lt;/child&gt;</div><div class="line">  &lt;pose frame=&#39;&#39;&gt;0 0 0.19 0 -0 0&lt;/pose&gt;</div><div class="line">  &lt;axis&gt;</div><div class="line">    &lt;xyz&gt;0 1 0&lt;/xyz&gt;</div><div class="line">    &lt;use_parent_model_frame&gt;0&lt;/use_parent_model_frame&gt;</div><div class="line">    &lt;limit&gt;</div><div class="line">      &lt;lower&gt;-1.79769e+308&lt;/lower&gt;</div><div class="line">      &lt;upper&gt;1.79769e+308&lt;/upper&gt;</div><div class="line">      &lt;effort&gt;-1&lt;/effort&gt;</div><div class="line">      &lt;velocity&gt;-1&lt;/velocity&gt;</div><div class="line">    &lt;/limit&gt;</div><div class="line">    &lt;dynamics&gt;</div><div class="line">      &lt;spring_reference&gt;0&lt;/spring_reference&gt;</div><div class="line">      &lt;spring_stiffness&gt;0&lt;/spring_stiffness&gt;</div><div class="line">      &lt;damping&gt;0&lt;/damping&gt;</div><div class="line">    &lt;/dynamics&gt;</div><div class="line">  &lt;/axis&gt;</div><div class="line">  &lt;physics&gt;</div><div class="line">    &lt;ode&gt;</div><div class="line">      &lt;limit&gt;</div><div class="line">        &lt;cfm&gt;0&lt;/cfm&gt;</div><div class="line">        &lt;erp&gt;0.2&lt;/erp&gt;</div><div class="line">      &lt;/limit&gt;</div><div class="line">      &lt;suspension&gt;</div><div class="line">        &lt;cfm&gt;0&lt;/cfm&gt;</div><div class="line">        &lt;erp&gt;0.2&lt;/erp&gt;</div><div class="line">      &lt;/suspension&gt;</div><div class="line">    &lt;/ode&gt;</div><div class="line">  &lt;/physics&gt;</div><div class="line">&lt;/joint&gt;</div><div class="line">&lt;joint name=&#39;constraint_back_right&#39; type=&#39;revolute&#39;&gt;</div><div class="line">  &lt;parent&gt;lower_leg_back_rightR_link&lt;/parent&gt;</div><div class="line">  &lt;child&gt;lower_leg_back_rightL_link&lt;/child&gt;</div><div class="line">  &lt;pose frame=&#39;&#39;&gt;0 0 0.19 0 -0 0&lt;/pose&gt;</div><div class="line">  &lt;axis&gt;</div><div class="line">    &lt;xyz&gt;-0 -1 -0&lt;/xyz&gt;</div><div class="line">    &lt;use_parent_model_frame&gt;0&lt;/use_parent_model_frame&gt;</div><div class="line">    &lt;limit&gt;</div><div class="line">      &lt;lower&gt;-1.79769e+308&lt;/lower&gt;</div><div class="line">      &lt;upper&gt;1.79769e+308&lt;/upper&gt;</div><div class="line">      &lt;effort&gt;-1&lt;/effort&gt;</div><div class="line">      &lt;velocity&gt;-1&lt;/velocity&gt;</div><div class="line">    &lt;/limit&gt;</div><div class="line">    &lt;dynamics&gt;</div><div class="line">      &lt;spring_reference&gt;0&lt;/spring_reference&gt;</div><div class="line">      &lt;spring_stiffness&gt;0&lt;/spring_stiffness&gt;</div><div class="line">      &lt;damping&gt;0&lt;/damping&gt;</div><div class="line">    &lt;/dynamics&gt;</div><div class="line">  &lt;/axis&gt;</div><div class="line">  &lt;physics&gt;</div><div class="line">    &lt;ode&gt;</div><div class="line">      &lt;limit&gt;</div><div class="line">        &lt;cfm&gt;0&lt;/cfm&gt;</div><div class="line">        &lt;erp&gt;0.2&lt;/erp&gt;</div><div class="line">      &lt;/limit&gt;</div><div class="line">      &lt;suspension&gt;</div><div class="line">        &lt;cfm&gt;0&lt;/cfm&gt;</div><div class="line">        &lt;erp&gt;0.2&lt;/erp&gt;</div><div class="line">      &lt;/suspension&gt;</div><div class="line">    &lt;/ode&gt;</div><div class="line">  &lt;/physics&gt;</div><div class="line">&lt;/joint&gt;</div><div class="line">&lt;joint name=&#39;constraint_front_left&#39; type=&#39;revolute&#39;&gt;</div><div class="line">  &lt;parent&gt;lower_leg_front_leftL_link&lt;/parent&gt;</div><div class="line">  &lt;child&gt;lower_leg_front_leftR_link&lt;/child&gt;</div><div class="line">  &lt;pose frame=&#39;&#39;&gt;0 0 0.19 0 -0 0&lt;/pose&gt;</div><div class="line">  &lt;axis&gt;</div><div class="line">    &lt;xyz&gt;0 1 0&lt;/xyz&gt;</div><div class="line">    &lt;use_parent_model_frame&gt;0&lt;/use_parent_model_frame&gt;</div><div class="line">    &lt;limit&gt;</div><div class="line">      &lt;lower&gt;-1.79769e+308&lt;/lower&gt;</div><div class="line">      &lt;upper&gt;1.79769e+308&lt;/upper&gt;</div><div class="line">      &lt;effort&gt;-1&lt;/effort&gt;</div><div class="line">      &lt;velocity&gt;-1&lt;/velocity&gt;</div><div class="line">    &lt;/limit&gt;</div><div class="line">    &lt;dynamics&gt;</div><div class="line">      &lt;spring_reference&gt;0&lt;/spring_reference&gt;</div><div class="line">      &lt;spring_stiffness&gt;0&lt;/spring_stiffness&gt;</div><div class="line">      &lt;damping&gt;0&lt;/damping&gt;</div><div class="line">    &lt;/dynamics&gt;</div><div class="line">  &lt;/axis&gt;</div><div class="line">  &lt;physics&gt;</div><div class="line">    &lt;ode&gt;</div><div class="line">      &lt;limit&gt;</div><div class="line">        &lt;cfm&gt;0&lt;/cfm&gt;</div><div class="line">        &lt;erp&gt;0.2&lt;/erp&gt;</div><div class="line">      &lt;/limit&gt;</div><div class="line">      &lt;suspension&gt;</div><div class="line">        &lt;cfm&gt;0&lt;/cfm&gt;</div><div class="line">        &lt;erp&gt;0.2&lt;/erp&gt;</div><div class="line">      &lt;/suspension&gt;</div><div class="line">    &lt;/ode&gt;</div><div class="line">  &lt;/physics&gt;</div><div class="line">&lt;/joint&gt;</div><div class="line">&lt;joint name=&#39;constraint_front_right&#39; type=&#39;revolute&#39;&gt;</div><div class="line">  &lt;parent&gt;lower_leg_front_rightR_link&lt;/parent&gt;</div><div class="line">  &lt;child&gt;lower_leg_front_rightL_link&lt;/child&gt;</div><div class="line">  &lt;pose frame=&#39;&#39;&gt;0 0 0.19 0 -0 0&lt;/pose&gt;</div><div class="line">  &lt;axis&gt;</div><div class="line">    &lt;xyz&gt;-0 -1 -0&lt;/xyz&gt;</div><div class="line">    &lt;use_parent_model_frame&gt;0&lt;/use_parent_model_frame&gt;</div><div class="line">    &lt;limit&gt;</div><div class="line">      &lt;lower&gt;-1.79769e+308&lt;/lower&gt;</div><div class="line">      &lt;upper&gt;1.79769e+308&lt;/upper&gt;</div><div class="line">      &lt;effort&gt;-1&lt;/effort&gt;</div><div class="line">      &lt;velocity&gt;-1&lt;/velocity&gt;</div><div class="line">    &lt;/limit&gt;</div><div class="line">    &lt;dynamics&gt;</div><div class="line">      &lt;spring_reference&gt;0&lt;/spring_reference&gt;</div><div class="line">      &lt;spring_stiffness&gt;0&lt;/spring_stiffness&gt;</div><div class="line">      &lt;damping&gt;0&lt;/damping&gt;</div><div class="line">    &lt;/dynamics&gt;</div><div class="line">  &lt;/axis&gt;</div><div class="line">  &lt;physics&gt;</div><div class="line">    &lt;ode&gt;</div><div class="line">      &lt;limit&gt;</div><div class="line">        &lt;cfm&gt;0&lt;/cfm&gt;</div><div class="line">        &lt;erp&gt;0.2&lt;/erp&gt;</div><div class="line">      &lt;/limit&gt;</div><div class="line">      &lt;suspension&gt;</div><div class="line">        &lt;cfm&gt;0&lt;/cfm&gt;</div><div class="line">        &lt;erp&gt;0.2&lt;/erp&gt;</div><div class="line">      &lt;/suspension&gt;</div><div class="line">    &lt;/ode&gt;</div><div class="line">  &lt;/physics&gt;</div><div class="line">&lt;/joint&gt;</div></div><!-- fragment --></li>
<li>For each leg, rename all the toe collision descriptions to match the corresponding toe (e.g., for the front left leg, rename <code>lower_leg_front_leftL_link_fixed_joint_lump__toe0_collision_1</code> to <code>toe0_collision</code>), and also add the following lines immediately below this collision tag (change <code>0</code> to match each toe): <div class="fragment"><div class="line">&lt;sensor name=&quot;toe0_contact&quot; type=&quot;contact&quot;&gt;</div><div class="line">    &lt;plugin name=&quot;toe0_plugin&quot; filename=&quot;libcontact.so&quot;/&gt;</div><div class="line">    &lt;contact&gt;</div><div class="line">        &lt;collision&gt;toe0_collision&lt;/collision&gt;</div><div class="line">    &lt;/contact&gt;</div><div class="line">&lt;/sensor&gt;</div></div><!-- fragment --></li>
<li>To help Minitaur with turning, you need to make joints '8', '9', '10', '11', '12', '13', '14' and '15' universal, to match the following format example. Make sure that the sign of 1 in <code>&lt;xyz&gt;</code> for both axes is positive for joints '9', '11', '13' and '15' (and with limits -2.091 and 1.049) and negative for '8', '10', '12' and '14' (and with limits -1.049 and 2.091). <div class="fragment"><div class="line">&lt;joint name=&#39;9&#39; type=&#39;universal&#39;&gt;</div><div class="line">  &lt;child&gt;lower_leg_front_leftR_link&lt;/child&gt;</div><div class="line">  &lt;parent&gt;motor_front_leftR_link&lt;/parent&gt;</div><div class="line">  &lt;axis&gt;</div><div class="line">    &lt;xyz&gt;-0 1 -0&lt;/xyz&gt;</div><div class="line">    &lt;limit&gt;</div><div class="line">      &lt;lower&gt;-2.091&lt;/lower&gt;</div><div class="line">      &lt;upper&gt;1.049&lt;/upper&gt;</div><div class="line">    &lt;/limit&gt;</div><div class="line">    &lt;dynamics&gt;</div><div class="line">      &lt;spring_reference&gt;0&lt;/spring_reference&gt;</div><div class="line">      &lt;spring_stiffness&gt;0&lt;/spring_stiffness&gt;</div><div class="line">    &lt;/dynamics&gt;</div><div class="line">    &lt;use_parent_model_frame&gt;1&lt;/use_parent_model_frame&gt;</div><div class="line">  &lt;/axis&gt;</div><div class="line">  &lt;axis2&gt;</div><div class="line">    &lt;xyz&gt;1 0 0&lt;/xyz&gt;</div><div class="line">    &lt;limit&gt;</div><div class="line">      &lt;lower&gt;-0.02&lt;/lower&gt;</div><div class="line">      &lt;upper&gt;0.02&lt;/upper&gt;</div><div class="line">    &lt;/limit&gt;</div><div class="line">    &lt;dynamics&gt;</div><div class="line">      &lt;spring_reference&gt;0&lt;/spring_reference&gt;</div><div class="line">      &lt;spring_stiffness&gt;0&lt;/spring_stiffness&gt;</div><div class="line">    &lt;/dynamics&gt;</div><div class="line">    &lt;use_parent_model_frame&gt;1&lt;/use_parent_model_frame&gt;</div><div class="line">  &lt;/axis2&gt;</div><div class="line">&lt;/joint&gt;</div></div><!-- fragment --></li>
<li>Make sure to move the SDF file to the <a href="minitaur_description/sdf/minitaur_constrained">minitaur_constrained folder</a> and rename it from <code>minitaur_gazebo.sdf</code> to <code>minitaur_constrained.sdf</code>.</li>
<li>Rename the model name in <a href="minitaur_description/sdf/minitaur_constrained/minitaur_constrained.sdf">minitaur_constrained.sdf</a> to <code>minitaur_constrained</code>. Do the same thing for the namespace in <code>libgazebo_ros_control.so</code>.</li>
</ol>
<h2>Minitaur with sensor head</h2>
<p>We have included an SDF file describing Minitaur equipped with a sensor head on top (see <a href="minitaur_description/sdf/minitaur_sensor/minitaur_sensor.sdf">minitaur_sensor.sdf</a>). If you modify any of the xacro files describing Minitaur or want to generate this SDF file on your own, follow the steps above to generate <a href="minitaur_description/sdf/minitaur_constrained/minitaur_constrained.sdf">minitaur_constrained.sdf</a> first. Then:</p><ol type="1">
<li>Copy the SDF file to the <a href="minitaur_description/sdf/minitaur_sensor">minitaur_sensor folder</a> and rename it from <code>minitaur_constrained.sdf</code> to <code>minitaur_sensor.sdf</code>.</li>
<li>To add the sensor head, include the following lines at the end of the SDF file (before the model termination): <div class="fragment"><div class="line">&lt;include&gt;</div><div class="line">  &lt;uri&gt;model://sensor_head&lt;/uri&gt;</div><div class="line">  &lt;pose&gt;0 0 0.04 0 0 0&lt;/pose&gt;</div><div class="line">&lt;/include&gt;</div><div class="line">&lt;joint name=&quot;sensor_head_joint&quot; type=&quot;fixed&quot;&gt;</div><div class="line">  &lt;child&gt;sensor_head::base&lt;/child&gt;</div><div class="line">  &lt;parent&gt;base_chassis_link_dummy&lt;/parent&gt;</div><div class="line">&lt;/joint&gt;</div></div><!-- fragment --> The sensor head description is included in <a href="minitaur_description/sdf/sensor_head/sensor_head.sdf">sensor_head.sdf</a> and you are free to modify it as needed.</li>
</ol>
<p><b>NOTE</b>: For the LIDAR you can set the sensor type to either <code>gpu_ray</code> or <code>ray</code> depending on whether GPU acceleration is available or not. The corresponding plugin filenames to use are <code>libgazebo_ros_gpu_laser.so</code> and <code>libgazebo_ros_laser.so</code>.</p>
<h2>Converting Vision60's URDF to SDF</h2>
<p>This process is more straightforward and we have already included properly converted URDF and SDF files. We have a URDF xacro file (<a href="vision60_description/urdf/vision60_gazebo.urdf.xacro">vision60_gazebo.urdf.xacro</a>) in the urdf folder that can be converted to URDF with </p><div class="fragment"><div class="line">$ python xacro.py vision60_gazebo.urdf.xacro &gt; vision60_gazebo.urdf</div></div><!-- fragment --><p> and subsequently to SDF using </p><div class="fragment"><div class="line">$ gz sdf -p vision60_gazebo.urdf &gt; ../sdf/vision60.sdf</div></div><!-- fragment --><p>After the conversion:</p><ol type="1">
<li>For each leg, rename all the toe collision descriptions to match the corresponding toe (use <code>toe0_collision</code>, <code>toe1_collision</code> as in the Minitaur SDF), and also add the following lines immediately below this collision tag (change <code>0</code> to match each toe): <div class="fragment"><div class="line">&lt;sensor name=&quot;toe0_contact&quot; type=&quot;contact&quot;&gt;</div><div class="line">    &lt;plugin name=&quot;toe0_plugin&quot; filename=&quot;libcontact.so&quot;/&gt;</div><div class="line">    &lt;contact&gt;</div><div class="line">        &lt;collision&gt;toe0_collision&lt;/collision&gt;</div><div class="line">    &lt;/contact&gt;</div><div class="line">&lt;/sensor&gt;</div></div><!-- fragment --></li>
<li>Make sure to move the SDF file to the <a href="vision60_description/sdf">vision60 SDF folder</a> and rename it to vision60.sdf.</li>
</ol>
<h2>Converting Spirit's URDF to SDF</h2>
<p>We have a URDF xacro file (<a href="spirit_description/urdf/spirit_gazebo.urdf.xacro">spirit_gazebo.urdf.xacro</a>) in the urdf folder that can be converted to URDF with </p><div class="fragment"><div class="line">$ python xacro.py spirit_gazebo.urdf.xacro &gt; spirit_gazebo.urdf</div></div><!-- fragment --><p> and subsequently to SDF using </p><div class="fragment"><div class="line">$ gz sdf -p spirit_gazebo.urdf &gt; ../sdf/spirit.sdf</div></div><!-- fragment --><p>After the conversion:</p><ol type="1">
<li>For each leg, rename all the toe collision descriptions to match the corresponding toe (use <code>toe0_collision</code>, <code>toe1_collision</code> as in the Minitaur SDF), and also add the following lines immediately below this collision tag (change <code>0</code> to match each toe): <div class="fragment"><div class="line">&lt;sensor name=&quot;toe0_contact&quot; type=&quot;contact&quot;&gt;</div><div class="line">    &lt;plugin name=&quot;toe0_plugin&quot; filename=&quot;libcontact.so&quot;/&gt;</div><div class="line">    &lt;contact&gt;</div><div class="line">        &lt;collision&gt;toe0_collision&lt;/collision&gt;</div><div class="line">    &lt;/contact&gt;</div><div class="line">&lt;/sensor&gt;</div></div><!-- fragment --></li>
<li>Make sure to move the SDF file to the <a href="spirit_description/sdf">spirit SDF folder</a> and rename it to spirit.sdf.</li>
</ol>
<h2>Other</h2>
<p>Except for the robots, we also include other useful descriptions of objects for autonomous tasks.</p>
<h3>AprilTags</h3>
<p>We have included the Gazebo model descriptions of some members of the 36h11 <a href="https://april.eecs.umich.edu/software/apriltag">AprilTag</a> family. Make sure to add the descriptions to your <code>GAZEBO_MODEL_PATH</code> by adding the following line to your <code>~/.bashrc</code> file: </p><div class="fragment"><div class="line">export GAZEBO_MODEL_PATH=$GAZEBO_MODEL_PATH:&lt;catkin_ws_location&gt;/src/kodlab_gazebo/other/apriltags_description</div></div><!-- fragment --><p>If you want to generate your own descriptions, you can download pre-generated tags <a href="https://april.eecs.umich.edu/software/apriltag">here</a>. Those tags (<code>.png</code> images) are quite small, so you might need to enlarge them (we suggest <a href="https://www.gimp.org/">gimp</a> - make sure to scale the images with <code>None</code> as the interpolation method). The package we used for the automated SDF model generation can be found <a href="https://github.com/vvasilo/gazebo_models">here</a>. The size of the generated tags (including the white margin) was set to 85mm. The dimension ratio between the tag's black square and the outside box (that includes the white margin) is approximately 0.8; this can be used to appropriately scale your tags. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
