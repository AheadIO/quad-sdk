<launch>
  <arg name="software"/>
  <arg name="controller"/>
  <arg name="init_pose"/>
  <arg name="planning"/>
  <arg name="logging"/>
  <arg name="visualization" value="false"/>
  <arg name="namespace"     default="robot_1"/>
  <arg name="robot_type"    default="spirit"/>
  <param name="tf_prefix"   value="$(arg namespace)" />

  <group if="$(arg software)">
    <!-- Spawn SDF model -->
    <node name="spawn_sdf_model" pkg="gazebo_ros" type="spawn_model" args="-sdf -param robot_description_sdf -model $(arg namespace) $(arg init_pose)" output="screen"/> -->
    
    <include file="$(find quad_utils)/launch/robot_driver.launch">
      <arg name="robot_type" value="$(arg robot_type)"/>
      <arg name="controller" value="$(arg controller)"/>
      <arg name="mocap" value="false"/>
      <arg name="is_hardware" value="false"/>
    </include>

    <!-- <rosparam file="$(find gazebo_scripts)/config/quad_control.yaml" command="load"/> -->
  
    <node name="controller_spawner"
        pkg="controller_manager"
        type="spawner"
        respawn="false"
        output="screen"
        args="joint_controller joint_state_controller"/>

    <!-- Load the contact state publisher -->
    <node name="contact_state_publisher" pkg="gazebo_scripts" type="contact_state_publisher_node" output="screen"/>
    
    <!-- Launch the node to publish the visual topics for the plans -->
    <node name="rviz_interface" pkg="quad_utils" type="rviz_interface_node" output="screen"/> 
    
    <include file="$(find quad_utils)/launch/visualization.launch">
      <arg name="namespace" value="$(arg namespace)"/>
      <arg name="visualization" value="$(arg visualization)"/>
    </include>
  </group> 

</launch>
